<?phpnamespace backend\models;use backend\models\User;use Yii;use yii\base\Model;class Adjust extends Model{    public $type=1;    public $status=1;    public $number;    public $content;    public $user_id;    public function rules()    {        return [            [['type','status','number'],'required'],            [['type', 'status'], 'in','range'=>[1,2,3]],            ['number','double'],            ['number','compare','compareValue'=>0,'operator'=>'>'],            ['number', 'validateNumber'],            ['user_id','integer'],            ['content','safe']        ];    }    public function attributeLabels()    {        return [            'number' => '数值',            'content' => '备注',            'type' => '类型',            'user_id' => '用户',            'status' => '方式',        ];    }    public function validateNumber($attribute)    {            $user=User::findOne($this->user_id);            if (!$user) {                $this->addError($attribute, '用户不存在.');            }else{                if($this->status==2){                                        if($this->type==2 and $user->it_basic<$this->number){                        $this->addError($attribute, '智力值不足');                    }                }            }    }}